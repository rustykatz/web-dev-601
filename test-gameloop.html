<!DOCTYPE html>
<html>
<head>

</head>

<body>
    <div class = "gameInfo">
        <a id="link" href="www.underthegui.com">Under the GUI</a>
        <p>Clicks: <a id="scoreText">0</a></p>
        <p id="message">This is some cool message</p>
    </div>

    <div class = "levelInfo">
        <p>Base Level: <a id="baseLevel"> 1 </a></p>
        <p>Worker Level: <a id="workerLevel"> 0 </a></p>
        <p>Farm Level: <a id="farmLevel"> 0 </a></p>
        <p>Mine Level: <a id="mineLevel"> 0 </a></p>
        <p>Factory Level: <a id="factoryLevel"> 0 </a></p>

        <p>Level: <a id="levelText"> Beginner </a></p> <br>
    </div>

    <div class = "costInfo">
        <p>Base Cost: <a id="baseCost"> 2 </a></p>
        <p>Worker Cost: <a id="workerCost"> 4 </a></p>
        <p>Farm Cost: <a id="farmCost"> 8 </a></p>
        <p>Mine Cost: <a id="mineCost"> 16 </a></p>
        <p>Factory Cost: <a id="factoryCost"> 32 </a></p>

    </div>

    <div class = "buttons">
        <h1>Basic Click</h1>
        <button onclick="basicClick()"> Add 1</button> 
        <br> 
        <!-- Extra Upgrades-->
        <h1> Upgrades</h1>
        <button onclick="upgradeBasePower()"> +1 Base Power</button>
        <button onclick="upgradeWorkerPower()"> +1 Worker Power</button>
        <button onclick="upgradeFarmPower()"> +1 Farm Power</button> <br>
        <button onclick="upgradeMinePower()"> +1 Mine Power</button>
        <button onclick="upgradeFactoryPower()"> +1 Factory Power</button>
       

        <h1>Other</h1>
        <button onclick="changeLink()">Change Link</button>
        <button onclick="showMessage()">Show Message</button>
    </div>


<script>

    // Global Vars
    var score = 0;

    // Scale Factor - 10%
    var scale = 0.1; 

    // Scale formula
    // Cost = floor( Level * Scale Factor + level )
    // Use floor to get nearest whole number 

    // Extra Upgrades
    var basePower = 1;
    var workerPower = 0;
    var farmPower = 0;
    var minePower =0;
    var factoryPower =0;

    // Cost values
    var upBaseCost = 2;
    var upWorkerCost = 4;
    var upFarmCost = 8;
    var upMineCost = 16;
    var upFactoryCost = 32;

    // ~~~~~~~~~~~~~~~~~~~
    // ~ UPGRADE LEVELS ~~
    // ~~~~~~~~~~~~~~~~~~~
    function upgradeBasePower(){
        var baseTxt = document.getElementById("baseLevel");
        var scoreTxt = document.getElementById("scoreText");
        var baseCostTxt =  document.getElementById("baseCost");
        // Check upgrade is affordable
        if(score >= upBaseCost){
            score -= upBaseCost;
            basePower += 1;
            upBaseCost += Math.floor(basePower * scale + basePower);
        }
        // Update Text
        baseTxt.innerHTML = basePower;
        scoreTxt.innerHTML = score;
        baseCostTxt.innerHTML = upBaseCost;
    }

    function upgradeWorkerPower(){
        var workerTxt = document.getElementById("workerLevel");
        var scoreTxt = document.getElementById("scoreText");
        var workerCostTxt = document.getElementById("workerCost");
        // Check upgrade is affordable
        if(score >= upWorkerCost){
            score -= upWorkerCost;
            workerPower += 1;
            upWorkerCost += Math.floor(workerPower * scale + workerPower);
        }
        // Update Text
        workerTxt.innerHTML = workerPower;
        scoreTxt.innerHTML = score;
        workerCostTxt.innerHTML = upWorkerCost;
    }

    function upgradeFarmPower(){
        var farmTxt = document.getElementById("farmLevel");
        var scoreTxt = document.getElementById("scoreText");
        var farmCostTxt = document.getElementById("farmCost");
        // Check upgrade is affordable
        if(score >= upFarmCost){
            score -= upFarmCost;
            farmPower += 1;
            upFarmCost += Math.floor(farmPower * scale + farmPower);
        }
        // Update Text
        farmTxt.innerHTML = farmPower;
        scoreTxt.innerHTML = score;
        farmCostTxt.innerHTML = upFarmCost;
    }

    function upgradeMinePower(){
        var mineTxt = document.getElementById("mineLevel");
        var scoreTxt = document.getElementById("scoreText");
        var mineCostTxt = document.getElementById("mineCost");
        // Check upgrade is affordable
        if(score >= upMineCost){
            score -= upMineCost;
            minePower += 1;
            upMineCost += Math.floor(minePower * scale + minePower);
        }
        // Update Text
        mineTxt.innerHTML = minePower;
        scoreTxt.innerHTML = score;
        mineCostTxt.innerHTML = upMineCost;
    }

    function upgradeFactoryPower(){
        var factoryTxt = document.getElementById("factoryLevel");
        var scoreTxt = document.getElementById("scoreText");
        var factoryCostTxt = document.getElementById("factoryCost");
        // Check upgrade is affordable
        if(score >= upFactoryCost){
            score -= upFactoryCost;
            factoryPower += 1;
            upFactoryCost += Math.floor(factoryPower * scale + factoryPower);
        }
        // Update Text
        factoryTxt.innerHTML = factoryPower;
        scoreTxt.innerHTML = score;
        factoryCostTxt.innerHTML = upFactoryCost;
    }


    // ~~~~~~~~~~~~~~~~~
    // ~~ BASIC CLICK ~~
    // ~~~~~~~~~~~~~~~~~
    function basicClick(){
        var scoreTxt = document.getElementById("scoreText");
        //Score increases by power
        score += basePower;
        scoreTxt.innerHTML = score;

    }


    // ~~~~~~~~~~~~~~~~~
    // ~~ AUTO CLICKS ~~ 
    // ~~~~~~~~~~~~~~~~~
    function autoClick(){
        var scoreOnPage = document.getElementById("scoreText");
        score += 1;
        scoreOnPage.innerHTML = score;
    }


    // ~~~~~~~~~~~~~~~
    // ~~ GAME LOOP ~~
    // ~~~~~~~~~~~~~~~
    var lastFrameTimeMS = 0;
    maxFPS = 2;
    
    function mainLoop(timestamp){
        if (timestamp < lastFrameTimeMS + (1000 / maxFPS)) {
            requestAnimationFrame(mainLoop);
            return;
        }
        
        lastFrameTimeMS = timestamp;

        // Put all the code to constantly run here
        autoClick();
        requestAnimationFrame(mainLoop);
    }
    requestAnimationFrame(mainLoop);

    // ~~~~~~~~~~~~~~~~~
    // ~~ OTHER STUFF ~~
    // ~~~~~~~~~~~~~~~~~
    
    function changeLink(){
        var linktext = document.getElementById("link");
        linktext.innerHTML = "Google";
        linktext.href = "www.google.com";
    }

    function showMessage(){
        var msg = document.getElementById("message");
        msg.innerHTML = "Cool message";
    }

</script>



</body>

</html>